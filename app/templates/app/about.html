<!DOCTYPE html>
{% load staticfiles %}
<html>
<head lang="ja">
    <meta charset="UTF-8">
    <title></title>
    <script src="{% static 'app/js/liquidFillGauge.js' %}" language="JavaScript"></script>
    <style>
        .liquidFillGaugeText { font-family: Helvetica; font-weight: bold; }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.4.1/css/swiper.min.css">
    <style>
      .swiper-container {
        width: 600px;
        height: 300px;
      }
      #slide1 {
        background-color: #FF9999
      }
      #slide2 {
        background-color: #99FF99
      }
      #slide3 {
        background-color: #9999FF
      }
    </style>
    <style>
      table{
        width: 100%;
        border-collapse: collapse;
      }

table tr{
  border-bottom: solid 2px white;
}

table tr:last-child{
  border-bottom: none;
}

table th{
  position: relative;
  text-align: left;
  width: 30%;
  background-color: #52c2d0;
  color: white;
  text-align: center;
  padding: 10px 0;
}

table th:after{
  display: block;
  content: "";
  width: 0px;
  height: 0px;
  position: absolute;
  top:calc(50% - 10px);
  right:-10px;
  border-left: 10px solid #52c2d0;
  border-top: 10px solid transparent;
  border-bottom: 10px solid transparent;
}

table td{
  text-align: left;
  width: 70%;
  text-align: center;
  background-color: #eee;
  padding: 10px 0;
}
    </style>
    <!-- Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
          crossorigin="anonymous">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.8.0/css/bootstrap-datepicker.min.css">
    <link href="{% static "app/css/app.css" %}" rel="stylesheet">
</head>
<body>

  <div align="center">
    <a class="btn btn-info" href="{% url 'index' %}">一覧表示のページへ戻る</a>
  </div>

<!-- show table -->
<table>
  <tr>
    <th>会社名</th>
    <td>テーブル株式会社</td>
  </tr>
  <tr>
    <th>創業</th>
    <td>1940年</td>
  </tr>
  <tr>
    <th>従業員数</th>
    <td>500人</td>
  </tr>
  <tr>
    <th>電話番号</th>
    <td>000-000-0000</td>
  </tr>
</table>

<!-- liquidFillGauge -->
<table>
  <td>
<script src="http://d3js.org/d3.v3.min.js" language="JavaScript"></script>
<svg id="fillgauge1" width="40%" height="250"></svg>
<script language="JavaScript">
    var gauge1 = loadLiquidFillGauge("fillgauge1", {{ total_spend }});
    var config1 = liquidFillGaugeDefaultSettings();
    config1.circleColor = "#FF7777";
    config1.textColor = "#FF4444";
    config1.waveTextColor = "#FFAAAA";
    config1.waveColor = "#FFDDDD";
    config1.circleThickness = 0.2;
    config1.textVertPosition = 0.2;
    config1.waveAnimateTime = 1000;
</script>
</td>
</table>

<!-- 円グラフ -->
<table>
  <td>
  <script src="https://d3js.org/d3.v5.min.js" language="JavaScript"></script>
  <script>
    // 1. データの準備

    var dataset = [
      {% for d in total_spend_list %}
        {"name": "{{ d.name }}", "value": {{ d.value }}},
      {% endfor %}
    ]
    console.log(dataset)


    var width = parseInt(window.innerWidth * 0.5); // グラフの幅
    var height = parseInt(width * 0.75); // グラフの高さ

    /*
    function window_load(){
      width = window.innerWidth;
      height = window.innerHeight;
    }
    window_load();
    window.onresize = window_load();
    */

    var radius = Math.min(width, height) / 2 - 10;

    // 2. SVG領域の設定
    var svg = d3.select("body").append("svg").attr("width", width).attr("height", height);

    g = svg.append("g").attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

    // 3. カラーの設定
    var color = d3.scaleOrdinal()
      .range(["#DC3912", "#3366CC", "#109618", "#FF9900", "#990099"]);

    // 4. pieチャートデータセット用関数の設定
    var pie = d3.pie()
      .value(function(d) { return d.value; })
      .sort(null);

    // 5. pieチャートSVG要素の設定
    var pieGroup = g.selectAll(".pie")
      .data(pie(dataset))
      .enter()
      .append("g")
      .attr("class", "pie");


    arc = d3.arc()
      .outerRadius(radius)
      .innerRadius(0);

    pieGroup.append("path")
      .attr("d", arc)
      .attr("fill", function(d) { return color(d.index) })
      .attr("opacity", 0.75)
      .attr("stroke", "white");

    // 6. pieチャートテキストSVG要素の設定
    var text = d3.arc()
      .outerRadius(radius - 30)
      .innerRadius(radius - 30);


    pieGroup.append("text")
      .attr("fill", "black")
      .attr("transform", function(d) { return "translate(" + text.centroid(d) + ")"; })
      .attr("dy", "5px")
      .attr("font", "10px")
      .attr("font-size", "10px")
      .attr("text-anchor", "middle")
      .text(function(d) { return d.data.name; });


  </script>
</td>
</table>

<!-- 折れ線グラフ -->
<table>
  <td>
<script>
  // 1. データの準備
  /*
  var dataset = [
    [5, 20],
    [25, 67],
    [85, 21],
    [100, 33],
    [220, 88],
    [250, 50],
    [330, 95],
    [410, 12],
    [475, 44],
    [480, 90]
  ];
  */

  var dataset = [
    {% for d in line_graph_list %}
      [{{ d.name }}, {{ d.value }}],
    {% endfor %}
  ]
  console.log(dataset)

  /*
  var width = 400; // グラフの幅
  var height = 300; // グラフの高さ
  */
  var width = parseInt(window.innerWidth * 0.9); // グラフの幅
  var height = parseInt(width * 0.4); // グラフの高さ
  var margin = { "top": 30, "bottom": 60, "right": 30, "left": 60 };

  // 2. SVG領域の設定
  var svg = d3.select("body").append("svg").attr("width", width).attr("height", height);

  // 3. 軸スケールの設定
  /*
  var xScale = d3.scaleLinear()
    .domain([0, d3.max(dataset, function(d) { return d[0]; })])
    .range([margin.left, width - margin.right]);
  */
  var xScale = d3.scaleLinear()
    .domain([0, 31])
    .range([margin.left, width - margin.right]);

  var yScale = d3.scaleLinear()
    .domain([0, d3.max(dataset, function(d) { return d[1]; })])
    .range([height - margin.bottom, margin.top]);

  // 4. 軸の表示
  var axisx = d3.axisBottom(xScale).ticks(5);
  var axisy = d3.axisLeft(yScale).ticks(5);


  svg.append("g")
    .attr("transform", "translate(" + 0 + "," + (height - margin.bottom) + ")")
    .call(axisx)
    .append("text")
    .attr("fill", "black")
    .attr("x", (width - margin.left - margin.right) / 2 + margin.left)
    .attr("y", 35)
    .attr("text-anchor", "middle")
    .attr("font-size", "10pt")
    .attr("font-weight", "bold")
    .text("Date");


  svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + 0 + ")")
    .call(axisy)
    .append("text")
    .attr("fill", "black")
    .attr("text-anchor", "middle")
    .attr("x", -(height - margin.top - margin.bottom) / 2 - margin.top)
    .attr("y", -35)
    .attr("transform", "rotate(-90)")
    .attr("font-weight", "bold")
    .attr("font-size", "10pt")
    .text("yen");

  // 5. ラインの表示
  svg.append("path")
    .datum(dataset)
    .attr("fill", "none")
    .attr("stroke", "steelblue")
    .attr("stroke-width", 1.5)
    .attr("d", d3.line()
      .x(function(d) { return xScale(d[0]); })
      .y(function(d) { return yScale(d[1]); }));
  </script>

  </td>
  </table>

<!-- slider -->
<!-- Slider main container -->
    <div class="swiper-container">
    <!-- Additional required wrapper -->
    <div class="swiper-wrapper">
      <!-- Slides -->
      <div class="swiper-slide" id="slide1">
        Slide 1 with liquidFillGauge
      </div>
      <div class="swiper-slide" id="slide2">Slide 2</div>
      <div class="swiper-slide" id="slide3">Slide 3</div>
    </div>
    <!-- If we need pagination -->
    <div class="swiper-pagination"></div>

    <!-- If we need navigation buttons -->
    <div class="swiper-button-prev"></div>
    <div class="swiper-button-next"></div>

    <!-- If we need scrollbar -->
    <div class="swiper-scrollbar"></div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.4.1/js/swiper.min.js"></script>
  <script>
    var mySwiper = new Swiper ('.swiper-container', {
      // Optional parameters
      direction: 'horizontal',
      loop: true,
      autoplay: {
        delay: 3000,
        disableOnInteraction: true
      },

      // Navigation arrows
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
    });
  </script>



</body>
</html>

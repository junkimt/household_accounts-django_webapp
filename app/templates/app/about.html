<!DOCTYPE html>
{% load staticfiles %}
<html>
<head lang="ja">
    <meta charset="UTF-8">
    <title></title>
    <script src="{% static 'app/js/liquidFillGauge.js' %}" language="JavaScript"></script>
    <style>
        .liquidFillGaugeText { font-family: Helvetica; font-weight: bold; }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.4.1/css/swiper.min.css">
    <style>
      .swiper-container {
        width: 600px;
        height: 300px;
      }
      #slide1 {
        background-color: #FF9999
      }
      #slide2 {
        background-color: #99FF99
      }
      #slide3 {
        background-color: #9999FF
      }
    </style>

    <style>
      table{
        width: 100%;
        border-collapse: collapse;
      }

      table tr{
        border-bottom: solid 2px white;
      }

      table tr:last-child{
        border-bottom: none;
      }

      table th{
        position: relative;
        text-align: left;
        width: 30%;
        background-color: #52c2d0;
        color: white;
        text-align: center;
        padding: 10px 0;
      }

      table th:after{
        display: block;
        content: "";
        width: 0px;
        height: 0px;
        position: absolute;
        top:calc(50% - 10px);
        right:-10px;
        border-left: 10px solid #52c2d0;
        border-top: 10px solid transparent;
        border-bottom: 10px solid transparent;
      }

      table td{
        text-align: left;
        width: 70%;
        text-align: center;
        background-color: #eee;
        padding: 10px 0;
      }
    </style>

<style>
  .wid-50 {
    width: 50%;
    height: 100px;
  }
</style>


    <!--
    <style type="text/css">
      .swiper-container {
        width: 100%;
        height: 370px;
      }

      .swiper-slide {
        padding-top: 180px;
        /* 画像位置の調整用 */
        text-align: center;
        color: #fff;
        font-size: 30px;
      }
    </style>
  -->
  <style type="text/css">
    .swiper-container {
      width: 100%;
      height: 400px;
    }
  </style>

    <!-- Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
          crossorigin="anonymous">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.8.0/css/bootstrap-datepicker.min.css">
    <link href="{% static "app/css/app.css" %}" rel="stylesheet">
</head>
<body>

  <br>

  <table>
    <tr>
      <td>
        <div align="left">
          <h3>　グラフで家計簿データを見る</h3>
        </div>
      </td>
      <td>
        <div align="right">
          <a class="btn btn-info" href="{% url 'index' %}">一覧表示のページへ戻る</a>
        </div>
      </td>
    </tr>
  </table>

  <hr>

  <!-- slider -->
  <script src="https://d3js.org/d3.v5.min.js" language="JavaScript"></script>
  <!-- Slider main container -->
      <div class="swiper-container">
      <!-- Additional required wrapper -->
      <div class="swiper-wrapper">
        <!-- Slides -->

        <script src="{% static 'app/js/lineGraph.js' %}" language="JavaScript"></script>
        {% for k,v in line_graph_dic_every_month.items %}

        <div class="swiper-slide" id="{{ k }}">

          <h3 class="swiper-slide-title" id="{{ k }}" align="center"></h3>

          <script>
            var title_str = "{{ k }}"
            title_str = title_str.split('-');
            title_str = title_str[1] + "年 " + title_str[2] + "月"
            document.write('<h3 align="center">' + title_str + '</h3>')
            /*
            window.onload=function() {
              var $replacement = document.getElementsByClassName( "swiper-slide-title" );
              for (i = 0; i < $replacement.length; i++) {
                $replacement[i].getElementById("{{k}}").innerHTML = title_str;
              }
            }
            */
          </script>

          <hr>


          <script>
            showLineGraph({{ v }}, "{{ k }}");
          </script>
        </div>

        {% endfor %}

      </div>
      <!-- If we need pagination -->
      <div class="swiper-pagination"></div>

      <!-- If we need navigation buttons -->
      <div class="swiper-button-prev"></div>
      <div class="swiper-button-next"></div>

      <!-- If we need scrollbar -->
      <div class="swiper-scrollbar"></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.4.1/js/swiper.min.js"></script>
    <script>

      /*
      var mySwiper = new Swiper ('.swiper-container', {
        // Optional parameters
        direction: 'horizontal',
        loop: true,
        autoplay: {
          delay: 3000,
          disableOnInteraction: true
        },

        // Navigation arrows
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        },
      });
      */
      var mySwiper = new Swiper ('.swiper-container', {
        // Optional parameters
        direction: 'horizontal',
        loop: false,

        // Navigation arrows
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        },
      });
    </script>






<!-- 複数あるグラフのレイアウトを考える -->

<table border="1" width="100%" height="300">
  <tr>
    <td class="wid-50">
      <p>aiueo</p>
    </td>
    <td class="wid-50" id="circle-graph">
      <script src="https://d3js.org/d3.v5.min.js" language="JavaScript"></script>
      <script>
        // 1. データの準備

        var dataset = [
          {% for d in total_spend_list %}
            {"name": "{{ d.name }}", "value": {{ d.value }}},
          {% endfor %}
        ]


        var width = parseInt(window.innerWidth * 1.0); // グラフの幅
        //var height = parseInt(width * 0.75); // グラフの高さ
        var height = 250;

        var radius = Math.min(width, height) / 2 - 10;

        // 2. SVG領域の設定
        //var svg = d3.select("body").append("svg").attr("width", width).attr("height", height);
        var svg = d3.select("#circle-graph").append("svg").attr("width", width).attr("height", height);

        var translated_pos_X = width * 0.75;
        g = svg.append("g").attr("transform", "translate(" + translated_pos_X + "," + height / 2 + ")");

        // 3. カラーの設定
        var color = d3.scaleOrdinal()
          .range(["#DC3912", "#3366CC", "#109618", "#FF9900", "#990099"]);

        // 4. pieチャートデータセット用関数の設定
        var pie = d3.pie()
          .value(function(d) { return d.value; })
          .sort(null);

        // 5. pieチャートSVG要素の設定
        var pieGroup = g.selectAll(".pie")
          .data(pie(dataset))
          .enter()
          .append("g")
          .attr("class", "pie");


        arc = d3.arc()
          .outerRadius(radius)
          .innerRadius(0);

        pieGroup.append("path")
          .attr("d", arc)
          .attr("fill", function(d) { return color(d.index) })
          .attr("opacity", 0.75)
          .attr("stroke", "white");

        // 6. pieチャートテキストSVG要素の設定
        var text = d3.arc()
          .outerRadius(radius - 30)
          .innerRadius(radius - 30);


        pieGroup.append("text")
          .attr("fill", "black")
          .attr("transform", function(d) { return "translate(" + text.centroid(d) + ")"; })
          .attr("dy", "5px")
          .attr("font", "10px")
          .attr("font-size", "10px")
          .attr("text-anchor", "middle")
          .text(function(d) { return d.data.name; });


      </script>
    </td>
  </tr>
</table>






<!-- liquidFillGauge -->

<table>
  <td>
<script src="http://d3js.org/d3.v3.min.js" language="JavaScript"></script>
<svg id="fillgauge1" width="40%" height="250"></svg>
<script language="JavaScript">
    var gauge1 = loadLiquidFillGauge("fillgauge1", {{ total_spend }});
    var config1 = liquidFillGaugeDefaultSettings();
    config1.circleColor = "#FF7777";
    config1.textColor = "#FF4444";
    config1.waveTextColor = "#FFAAAA";
    config1.waveColor = "#FFDDDD";
    config1.circleThickness = 0.2;
    config1.textVertPosition = 0.2;
    config1.waveAnimateTime = 1000;
</script>
</td>
</table>




</body>
</html>
